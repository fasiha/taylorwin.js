{"version":3,"file":null,"sources":["../src/taylorwin.js"],"sourcesContent":["function prod(v) {\n  let x = 1;\n  for (let elt of v) {\n    x *= elt;\n  }\n  return x;\n};\nfunction sum(v) {\n  let x = 0;\n  for (let elt of v) {\n    x += elt\n  };\n  return x;\n}\nfunction range0f(n, f) { return Array.from(Array(n), (_, i) => f(i)); }\nfunction range1(n) { return range0f(n, x => x + 1); }\nfunction range1f(n, f) { return range0f(n, x => f(x + 1)); }\n\nexport default function taylorwin(N, nbar, sll) {\n  const B = Math.pow(10, Math.abs(sll) / 20);\n  const A = Math.log(B + Math.sqrt(B * B - 1)) / Math.PI;\n  const σ2 = nbar * nbar / (A * A + (nbar - 0.5) * (nbar - 0.5));\n\n  let fNumerator = m =>\n      0.5 * Math.pow(-1, m + 1) *\n      prod(range1f(nbar - 1,\n                   i => 1 - (m * m / σ2) / (A * A + (i - 0.5) * (i - 0.5))));\n  let fDenominator = m =>\n      prod(range1(nbar - 1).filter(x => x != m).map(j => 1 - m * m / (j * j)));\n  let F = range1f(nbar - 1, m => fNumerator(m) / fDenominator(m));\n\n  return range0f(\n      N, n => 1 +\n              2 * sum(F.map((Fm, m_1) => Fm *\n                                         Math.cos(2 * Math.PI * (m_1 + 1) / N *\n                                                  (n - 0.5 * N + 0.5)))));\n}\n"],"names":["prod","v","x","elt","sum","range0f","n","f","Array","from","_","i","range1","range1f","taylorwin","N","nbar","sll","B","Math","pow","abs","A","log","sqrt","PI","σ2","fNumerator","m","fDenominator","filter","map","j","F","Fm","m_1","cos"],"mappings":";;;;;;AAAA,SAASA,IAAT,CAAcC,CAAd,EAAiB;MACXC,IAAI,CAAR;;;;;;yBACgBD,CAAhB,8HAAmB;UAAVE,GAAU;;WACZA,GAAL;;;;;;;;;;;;;;;;;SAEKD,CAAP;;AAEF,SAASE,GAAT,CAAaH,CAAb,EAAgB;MACVC,IAAI,CAAR;;;;;;0BACgBD,CAAhB,mIAAmB;UAAVE,GAAU;;WACZA,GAAL;;;;;;;;;;;;;;;;;;SAEKD,CAAP;;AAEF,SAASG,OAAT,CAAiBC,CAAjB,EAAoBC,CAApB,EAAuB;SAASC,MAAMC,IAAN,CAAWD,MAAMF,CAAN,CAAX,EAAqB,UAACI,CAAD,EAAIC,CAAJ;WAAUJ,EAAEI,CAAF,CAAV;GAArB,CAAP;;AACzB,SAASC,MAAT,CAAgBN,CAAhB,EAAmB;SAASD,QAAQC,CAAR,EAAW;WAAKJ,IAAI,CAAT;GAAX,CAAP;;AACrB,SAASW,OAAT,CAAiBP,CAAjB,EAAoBC,CAApB,EAAuB;SAASF,QAAQC,CAAR,EAAW;WAAKC,EAAEL,IAAI,CAAN,CAAL;GAAX,CAAP;;;AAEzB,AAAe,SAASY,SAAT,CAAmBC,CAAnB,EAAsBC,IAAtB,EAA4BC,GAA5B,EAAiC;MACxCC,IAAIC,KAAKC,GAAL,CAAS,EAAT,EAAaD,KAAKE,GAAL,CAASJ,GAAT,IAAgB,EAA7B,CAAV;MACMK,IAAIH,KAAKI,GAAL,CAASL,IAAIC,KAAKK,IAAL,CAAUN,IAAIA,CAAJ,GAAQ,CAAlB,CAAb,IAAqCC,KAAKM,EAApD;MACMC,KAAKV,OAAOA,IAAP,IAAeM,IAAIA,CAAJ,GAAQ,CAACN,OAAO,GAAR,KAAgBA,OAAO,GAAvB,CAAvB,CAAX;;MAEIW,aAAa,SAAbA,UAAa;WACb,MAAMR,KAAKC,GAAL,CAAS,CAAC,CAAV,EAAaQ,IAAI,CAAjB,CAAN,GACA5B,KAAKa,QAAQG,OAAO,CAAf,EACQ;aAAK,IAAKY,IAAIA,CAAJ,GAAQF,EAAT,IAAgBJ,IAAIA,CAAJ,GAAQ,CAACX,IAAI,GAAL,KAAaA,IAAI,GAAjB,CAAxB,CAAT;KADR,CAAL,CAFa;GAAjB;MAIIkB,eAAe,SAAfA,YAAe;WACf7B,KAAKY,OAAOI,OAAO,CAAd,EAAiBc,MAAjB,CAAwB;aAAK5B,KAAK0B,CAAV;KAAxB,EAAqCG,GAArC,CAAyC;aAAK,IAAIH,IAAIA,CAAJ,IAASI,IAAIA,CAAb,CAAT;KAAzC,CAAL,CADe;GAAnB;MAEIC,IAAIpB,QAAQG,OAAO,CAAf,EAAkB;WAAKW,WAAWC,CAAX,IAAgBC,aAAaD,CAAb,CAArB;GAAlB,CAAR;;SAEOvB,QACHU,CADG,EACA;WAAK,IACA,IAAIX,IAAI6B,EAAEF,GAAF,CAAM,UAACG,EAAD,EAAKC,GAAL;aAAaD,KACAf,KAAKiB,GAAL,CAAS,IAAIjB,KAAKM,EAAT,IAAeU,MAAM,CAArB,IAA0BpB,CAA1B,IACCT,IAAI,MAAMS,CAAV,GAAc,GADf,CAAT,CADb;KAAN,CAAJ,CADT;GADA,CAAP;;;;;"}